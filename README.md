# tprompts

Universal CLI for installing and managing prompt packs across popular coding editors. `tprompts` keeps your prompt content in standalone repositories, lets you register them locally (from Git or the filesystem), discover the prompt packs they expose, and install the configured files into editors such as VS Code, Cursor, Windsurf, and Claude Code.

## Repository Layout
- `src/` – TypeScript source for the Oclif-based CLI (all commands)
- `lib/` – Compiled JavaScript emitted by `npm run build` (published to npm)
- `example-prompts/` – A sample prompts repository that demonstrates the `tprompts.json` format
- `docs/tprompts-plan.md` – Design document and implementation notes
- `claude.md` – Comprehensive documentation for all CLI commands
- `node_modules/`, `package.json`, `tsconfig.json` – Standard Node.js project scaffolding

## Key Features
- **Repository Management**: Register repositories from Git URLs or local paths (`tprompts register`)
- **Version Control**: Checkout specific branches, tags, or commits; update to latest (`tprompts update`, `tprompts version`)
- **Direct URL Installation**: Install prompts directly from GitHub URLs without registration
- **Multi-Repository Support**: Manage multiple prompt sources with optional default selection (`tprompts repos`)
- **Prompt Discovery**: Browse available prompts and view metadata (`tprompts list --verbose`)
- **Smart Installation**: Install prompts with prefix/suffix processing, conflict detection, and dry-run mode (`tprompts install`)
- **Clean Removal**: Uninstall prompts and clean up empty directories (`tprompts remove`)
- **Editor Support**: VS Code, Cursor, Windsurf, and Claude Code via per-editor configuration blocks

## Prerequisites
- Node.js 16+
- Git (required when registering remote repositories)

## Getting Started
```bash
# Install dependencies
npm install

# Run the CLI in watch mode during development
npm run dev -- --help

# Or build once and run the compiled CLI
npm run build
node lib/cli.js --help
```

You can also execute the TypeScript entry point directly:
```bash
npx tsx src/cli.ts <command> [flags]
```

## Quick Start

```bash
# Install globally
npm install -g @thongntit/tprompts

# Or use with npx
npx @thongntit/tprompts --help
```

## CLI Usage

### Basic Workflow
```bash
# 1. Register a repository (Git URL or local folder)
tprompts register https://github.com/user/my-prompts.git
tprompts register --name "examples" --default ./example-prompts

# 2. List available prompts
tprompts list examples --verbose

# 3. Install a prompt pack into an editor
tprompts install examples/coding-assistant vscode
tprompts install examples/coding-assistant cursor --dry-run
```

### Direct URL Installation (No Registration Required)
```bash
# Install directly from GitHub
tprompts install https://github.com/user/repo/prompt-name vscode
tprompts install https://github.com/user/repo/tree/main/prompt-name cursor
```

### Repository Management
```bash
# List registered repositories
tprompts repos --verbose

# Update repositories
tprompts update                    # Update default repository
tprompts update my-repo            # Update specific repository
tprompts update --all              # Update all repositories

# Version management
tprompts version my-repo --list           # List available versions
tprompts version my-repo --checkout v1.0.0  # Switch to specific version

# Unregister repository
tprompts unregister my-repo
tprompts unregister my-repo --keep-files  # Keep local files
```

### Prompt Installation & Removal
```bash
# Install prompts
tprompts install repo/prompt vscode        # Install to VS Code
tprompts install repo/prompt --editor cursor  # Install to Cursor
tprompts install repo/prompt vscode --force   # Force overwrite

# Remove installed prompts
tprompts remove repo/prompt vscode
tprompts remove repo/prompt cursor --dry-run
```

**Note**: `tprompts install` will prompt you to choose an editor if not specified. Existing files are never overwritten unless you confirm or pass `--force`.

## Prompt Repository Format
Each prompt pack lives in its own folder and must include a `tprompts.json` configuration file describing how files should be installed per editor. A minimal example:

```json
{
  "name": "Coding Assistant",
  "description": "Shared rules for the coding assistant persona",
  "editors": {
    "vscode": {
      "system-prompt.md": {
        "location": ".vscode/ai-assistant.md",
        "prefix": "---\nrole: system\napplyTo: '**'\n---\n\n"
      },
      "commands/": {
        "location": ".vscode/commands/",
        "suffix": "\n\n<!-- Generated by tprompts -->"
      }
    },
    "cursor": {
      "system-prompt.md": {
        "location": ".cursorrules"
      }
    }
  }
}
```

Configuration options include:
- `location`: Destination path relative to the project root
- `prefix` / `suffix`: Optional text injected before or after file contents
- Directory support: Point a configuration key at a source directory (`commands/` above) to copy all of its files recursively while keeping the structure intact

Refer to `example-prompts/` for complete, multi-editor configurations.

## Local State
- Registry and settings live in `~/.tprompts/repos.json` and `~/.tprompts/config.json`
- Git repositories registered through `tprompts register <url>` are cloned into `~/.tprompts/repositories/<name>`
- Installations write directly into your current working directory; use `--dry-run` to preview changes

## Development
- `npm run dev` – Execute the CLI via `tsx` (passes additional args after `--`)
- `npm run build` – Compile TypeScript to `lib/`
- `npm test` – Reserved for Jest tests (no suites yet)

## Available Commands

Full command documentation is available in `claude.md`. Quick reference:

- `tprompts register <source>` - Register a repository
- `tprompts repos` - List registered repositories
- `tprompts update [repo]` - Update repositories
- `tprompts unregister <repo>` - Remove a repository
- `tprompts version <repo>` - Manage repository versions
- `tprompts list [repo]` - List available prompts
- `tprompts install <prompt> [editor]` - Install prompts
- `tprompts remove <prompt> [editor]` - Remove installed prompts

Run `tprompts --help` or `tprompts <command> --help` for detailed usage information.

## Documentation

- **`claude.md`** - Comprehensive command reference with examples
- **`docs/tprompts-plan.md`** - Design document and implementation notes
- **`example-prompts/`** - Sample prompt repository demonstrating the format
