# tprompts

Universal CLI for installing and managing prompt packs across popular coding editors. `tprompts` keeps your prompt content in standalone repositories, lets you register them locally (from Git or the filesystem), discover the prompt packs they expose, and install the configured files into editors such as VS Code, Cursor, Windsurf, and Claude Code.

## Repository Layout
- `src/` – TypeScript source for the Oclif-based CLI (`install`, `list`, `register`, `repos` commands)
- `lib/` – Compiled JavaScript emitted by `npm run build` (published to npm)
- `example-prompts/` – A sample prompts repository that demonstrates the `tprompts.json` format
- `docs/tprompts-plan.md` – Design document and roadmap for upcoming commands (update, remove, direct URL installs)
- `node_modules/`, `package.json`, `tsconfig.json` – Standard Node.js project scaffolding

## Key Features
- Register prompt repositories from a Git URL or a local folder (`tprompts register`)
- Maintain a registry of repositories inside `~/.tprompts` with optional default selection (`tprompts repos`)
- Discover prompt packs and view their metadata pulled from `tprompts.json` (`tprompts list` with `--verbose` for details)
- Install prompt packs into a chosen editor, including prefix/suffix processing, conflict detection, and optional dry runs (`tprompts install`)
- Support for VS Code, Cursor, Windsurf, and Claude Code via per-editor configuration blocks

## Prerequisites
- Node.js 16+
- Git (required when registering remote repositories)

## Getting Started
```bash
# Install dependencies
npm install

# Run the CLI in watch mode during development
npm run dev -- --help

# Or build once and run the compiled CLI
npm run build
node lib/cli.js --help
```

You can also execute the TypeScript entry point directly:
```bash
npx tsx src/cli.ts <command> [flags]
```

## CLI Usage
```bash
# Register a repository (Git URL or local folder)
tprompts register https://github.com/user/my-prompts.git
# Custom name and set as default
tprompts register --name "examples" --default ./example-prompts

# Inspect registered repositories
tprompts repos --verbose

# Discover the prompt packs exposed by a repository
tprompts list examples --verbose

# Install a prompt pack into an editor
tprompts install examples/coding-assistant vscode
# Force overwrite and preview changes
tprompts install examples/coding-assistant cursor --dry-run
```

`tprompts install` will ask you to choose an editor if one is not provided via the positional argument or the `--editor/-e` flag. Existing files are never overwritten unless you confirm or pass `--force`.

## Prompt Repository Format
Each prompt pack lives in its own folder and must include a `tprompts.json` configuration file describing how files should be installed per editor. A minimal example:

```json
{
  "name": "Coding Assistant",
  "description": "Shared rules for the coding assistant persona",
  "editors": {
    "vscode": {
      "system-prompt.md": {
        "location": ".vscode/ai-assistant.md",
        "prefix": "---\nrole: system\napplyTo: '**'\n---\n\n"
      },
      "commands/": {
        "location": ".vscode/commands/",
        "suffix": "\n\n<!-- Generated by tprompts -->"
      }
    },
    "cursor": {
      "system-prompt.md": {
        "location": ".cursorrules"
      }
    }
  }
}
```

Configuration options include:
- `location`: Destination path relative to the project root
- `prefix` / `suffix`: Optional text injected before or after file contents
- Directory support: Point a configuration key at a source directory (`commands/` above) to copy all of its files recursively while keeping the structure intact

Refer to `example-prompts/` for complete, multi-editor configurations.

## Local State
- Registry and settings live in `~/.tprompts/repos.json` and `~/.tprompts/config.json`
- Git repositories registered through `tprompts register <url>` are cloned into `~/.tprompts/repositories/<name>`
- Installations write directly into your current working directory; use `--dry-run` to preview changes

## Development
- `npm run dev` – Execute the CLI via `tsx` (passes additional args after `--`)
- `npm run build` – Compile TypeScript to `lib/`
- `npm test` – Reserved for Jest tests (no suites yet)

See `docs/tprompts-plan.md` for planned enhancements such as repo updates, uninstall workflows, and direct URL installs.
